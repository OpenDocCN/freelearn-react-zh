# 前言

使用 React 创建渐进式 Web 应用旨在为您提供关于 Web 开发未来的一切所需。**渐进式 Web 应用**（**PWA**）对于希望利用 Web 所能提供的最佳功能的公司来说越来越普遍，它们由最前沿的技术驱动，弥合了 Web 应用和本地应用之间的差距。

在本书中，我们将利用流行的 JavaScript 库 React.js 的强大功能来创建快速和功能齐全的用户界面。然后，我们将使用革命性的新 Web 技术添加渐进式 Web 应用程序功能，如推送通知和即时加载。最后，我们将简化应用程序的性能，并探讨如何最好地衡量其速度。

通过本书，您将对 React 和 PWA 感到舒适，并为 Web 的未来做好准备。

# 本书涵盖内容

第一章，*创建我们的应用结构*，简要概述了您将学习构建的内容--一个具有推送通知和离线支持的实时聊天应用程序。您将了解这种应用程序所面临的挑战，并对将在本书中讨论的技术进行简要概述。在本章结束时，您将使用 HTML 和 CSS 设置聊天应用程序的应用程序结构。

第二章，*使用 Webpack 入门*，指出在编写任何 React 代码之前，您需要设置 webpack 构建过程。在本章中，您将介绍 webpack；您将学会安装该软件包并设置一些基本配置，以及启动开发服务器。本章将使您准备好开始学习 React。

第三章，*我们应用的登录页面*，向您介绍 React 时间！在本章中，您将学会编写前两个组件：一个应用程序包装器来包含应用程序和一个 LoginContainer。了解如何使用 ReactDOM 和 JSX 进行渲染，并编写一个基本表单，允许用户登录。在本章结束时，您将熟悉并熟悉 React 语法。

第四章《使用 Firebase 轻松设置后端》告诉您登录表单看起来不错，但缺乏实际功能。为了继续前进，您将需要一个后端数据库和身份验证解决方案来与之通信。本章将向您介绍 Google 的 Firebase。在 Firebase 控制台上设置应用程序，然后为表单编程登录和注册功能。

第五章《使用 React 进行路由》让您知道一旦用户登录，您希望将他们重定向到主要的聊天视图。因此，在本章中，您将学会构建主视图，然后设置 React 路由器，允许用户在页面之间移动。最后，学会添加第三个视图——个人用户视图，并探索 URL 中的参数匹配。

第六章《完成我们的应用程序》将带您完成构建基本应用程序的最后一步，为聊天和用户视图添加功能。您将学会如何从 Firebase 中写入和读取数据，并利用 React 生命周期方法来实现。一旦完成，您的 Web 应用程序将完成，但它还不够先进！

第七章《添加服务工作者》涵盖了服务工作者及其工作原理。在这里，您将了解如何注册自定义服务工作者，并了解其生命周期，然后连接到默认的 Firebase 消息服务工作者。

第八章《使用服务工作者发送推送通知》教你配置应用程序，因为我们的服务工作者已经准备好，可以发送推送通知。您将使用 Firebase Cloud Messaging 来管理发送这些通知，并添加自定义功能来控制在桌面和移动设备上何时以及如何发送它们。

第九章《使用清单使我们的应用可安装》教授清单是一个 JSON 文件，允许用户将您的应用保存到他们的主屏幕上。您将学会创建清单，并了解最佳实践以及 iOS 特定的考虑因素。您还将学会自定义闪屏和图标。

第十章，*应用外壳*，阐述了应用外壳模式作为 PWA 中的关键概念，但它带来了哪些优势？您将介绍渐进增强的外壳和 RAIL 系统，然后将一些应用布局移出 React 以实现最佳渲染。

第十一章，*使用 Webpack 对 JavaScript 进行分块以优化性能*，探讨了 PRPL 模式、其目标和方法，以及如何在应用中实现它的概述。然后，您将深入研究，根据路由将 JavaScript 分块，并延迟加载次要路由。

第十二章，*准备缓存*，介绍了如何利用服务工作线程实现离线功能，通过了解新的缓存 API 以及如何将其与服务工作线程一起使用来缓存 JavaScript 分块。

第十三章，*审计我们的应用*，现在是检查我们工作的时候了！在本章中，您将介绍 Lighthouse 并了解如何使用 Lighthouse 审计 PWA。

第十四章，*结论和下一步*，您的第一个 PWA 已经完成！在开发过程中，您手动构建了大部分 PWA 基础设施。在本章中，您将学习有关辅助库和快捷方式以节省时间，并探索 PWA 开发的未来。此外，您还将了解有关未来项目想法和改进的建议，作为额外的挑战。

# 本书所需内容

您所需的只是一台可以运行 Node.js 的计算机（[`nodejs.org/en/download/`](https://nodejs.org/en/download/)），一个用于编写代码的文本编辑器，以及最新版本的 Chrome 浏览器。如果您想在移动设备上测试应用程序，还需要一部 Android 或 iOS 手机。

# 本书适合对象

本书适用于想要开发高性能 Web 用户界面的 JavaScript 开发人员。本书需要对 HTML、CSS 和 JavaScript 有基本的了解。

# 约定

在这本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例以及它们的含义解释。文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下：在`App.js`中，我们首先导入`LoginContainer`。

代码块设置如下：

```jsx
import React, { Component } from 'react';
import LoginContainer from './LoginContainer';
import './app.css';

class App extends Component {
  render() {
    return <LoginContainer />
  }
}

export default App;
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```jsx
if (module.hot) {
  module.hot.accept('./components/App', () => {
 const NextApp = require('./components/App').default;
    ReactDOM.render(
      <App/>,
      document.getElementById('root')
    );
  });
}
```

任何命令行输入或输出都以以下方式编写：

```jsx
 yarn add css-loader style-loader
```

**新术语**和**重要单词**以粗体显示。例如，屏幕上看到的单词，比如菜单或对话框中的单词，以这种方式出现在文本中：返回到应用程序，您应该看到我们新组件的`Hello from LoginContainer`。

警告或重要说明会以这种方式出现。提示和技巧会以这种方式出现。
