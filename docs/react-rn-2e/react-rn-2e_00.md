# 前言

我从来没有对开发移动应用程序感兴趣。我曾坚信这是网络，或者什么都不是，已经有太多应用程序安装在设备上了，没有必要再安装更多的应用程序。然后 React Native 出现了。我已经在为 Web 应用程序编写 React 代码并且喜欢它。事实证明，我并不是唯一一个对使用不同的工具、环境和编程语言来维护同一个应用程序的想法感到犹豫的开发人员。React Native 的诞生是出于自然的愿望，即将 Web 开发体验中表现良好的东西（React），应用到原生应用程序开发中。原生移动应用程序提供比 Web 浏览器更好的用户体验。事实证明我错了，我们现在确实需要移动应用程序。但这没关系，因为 React Native 是一个很棒的工具。这本书基本上是我作为 Web 上的 React 开发人员和作为一个经验较少的移动应用程序开发人员的经验。React Native 旨在让已经了解 Web 上的 React 的开发人员轻松过渡。通过这本书，你将学习在两种环境中进行 React 开发的微妙之处。你还将学习 React 的概念主题，一个可以针对任何东西的简单渲染抽象。今天，它是 Web 浏览器和移动设备。明天，它可能是任何东西。

这本书的第二版是为了应对不断发展的 React 项目而写的 - 包括实施 React 组件的最新最佳实践以及围绕 React 的生态系统。我认为，React 开发人员重要的是要了解 React 的工作原理，以及 React 的实现如何改变以更好地支持依赖它的人。在这一版的 React 和 React Native 中，我尽力捕捉了 React 今天的本质和它的发展方向。

# 这本书适合谁

这本书是为任何想要开始学习如何使用 Facebook 的两个 UI 库的 JavaScript 开发人员 - 无论是初学者还是专家编写的。不需要了解 React，但对 ES2017 的工作知识会帮助你更好地跟上。

# 第一部分：React

第一章，*为什么选择 React？*，介绍了 React 的基本知识以及为什么你想要使用它。

第二章，“使用 JSX 进行渲染”，解释了 JSX 是 React 用于渲染内容的语法。HTML 是最常见的输出，但 JSX 也可以用于渲染许多其他内容，例如原生 UI 组件。

第三章，“组件属性，状态和上下文”，展示了属性如何传递给组件，状态在更改时如何重新渲染组件，以及上下文在组件中的作用。

第四章，“事件处理-React 方式”，解释了 React 中的事件是在 JSX 中指定的。React 处理事件的方式有微妙之处，以及您的代码应该如何响应它们。

第五章，“打造可重用组件”，显示组件通常是使用较小的组件组合而成的。这意味着您必须正确地将数据和行为传递给子组件。

第六章，“React 组件生命周期”，解释了 React 组件是如何不断创建和销毁的。在此期间还有其他几个生命周期事件，您可以在其中执行诸如从网络获取数据之类的操作。

第七章，“验证组件属性”，展示了 React 具有一种机制，允许您验证传递给组件的属性类型。这确保了没有意外的值传递给您的组件。

第八章，“扩展组件”，介绍了用于扩展 React 组件的机制。这包括继承和高阶组件。

第九章，“使用路由处理导航”，解释了导航是任何 Web 应用程序的重要部分。React 使用`react-router`包以声明方式处理路由。

第十章，“服务器端 React 组件”，讨论了当在浏览器中渲染时，React 如何将组件呈现到 DOM 中。它还可以将组件呈现为字符串，这对于在服务器上呈现页面并将静态内容发送到浏览器非常有用。

第十一章，*移动优先 React 组件*，解释了移动 Web 应用程序与为桌面屏幕分辨率设计的 Web 应用程序在根本上是不同的。`react-bootstrap`包可用于以移动优先的方式构建 UI。

# 第二部分：React Native

第十二章，*为什么选择 React Native？*，显示 React Native 是用于移动应用程序的 React。如果您已经投资于 Web 应用程序的 React，为什么不利用相同的技术提供更好的移动体验呢？

第十三章，*启动 React Native 项目*，讨论了没有人喜欢编写样板代码或设置项目目录。React Native 有工具来自动化这些单调的任务。

第十四章，*使用 Flexbox 构建响应式布局*，解释了为什么 Flexbox 布局模型在使用 CSS 的 Web UI 布局中很受欢迎。React Native 使用相同的机制来布局屏幕。

第十五章，*在屏幕之间导航*，讨论了导航是 Web 应用程序的重要部分，移动应用程序也需要工具来处理用户如何从一个屏幕移动到另一个屏幕。

第十六章，*渲染项目列表*，显示 React Native 有一个列表视图组件，非常适合渲染项目列表。您只需提供数据源，它就会处理剩下的事情。

第十七章，*显示进度*，解释了进度条非常适合显示确定数量的进度。当您不知道某事会花费多长时间时，您可以使用进度指示器。React Native 具有这两个组件。

第十八章，*地理位置和地图*，显示了`react-native-maps`包为 React Native 提供了地图功能。在 Web 应用程序中使用的地理位置 API 直接由 React Native 提供。

第十九章，*收集用户输入*，显示大多数应用程序需要从用户那里收集输入。移动应用程序也不例外，React Native 提供了各种控件，与 HTML 表单元素类似。

第二十章，*警报、通知和确认*，解释了警报用于打断用户，让他们知道发生了重要的事情，通知是不显眼的更新，确认用于立即获得答案。

第二十一章，*响应用户手势*，讨论了移动设备上的手势在浏览器中很难做到正确。另一方面，原生应用程序为滑动、触摸等提供了更好的体验。React Native 为你处理了很多细节。

第二十二章，*控制图像显示*，展示了图像在大多数应用程序中扮演着重要角色，无论是作为图标、标志还是物品的照片。React Native 具有加载图像、缩放图像和适当放置图像的工具。

第二十三章，*离线操作*，解释了移动设备往往具有不稳定的网络连接。因此，移动应用程序需要能够处理临时的离线条件。为此，React Native 具有本地存储 API。

# 第三部分：React 架构

第二十四章，*处理应用程序状态*，讨论了应用程序状态对于任何 React 应用程序，无论是 Web 还是移动应用程序都很重要。这就是为什么理解 Redux 和 Immutable.js 等库很重要。

第二十五章，*为什么使用 Relay 和 GraphQL*？解释了 Relay 和 GraphQL 结合使用是一种处理规模化状态的新方法。它是一个查询和变异语言，以及一个用于包装 React 组件的库。

第二十六章，*构建 Relay React 应用程序*，显示了 Relay 和 GraphQL 的真正优势在于你的状态模式在应用程序的 Web 和原生版本之间是共享的。

# 为了充分利用本书

1.  告知读者在开始之前需要了解的事情，并明确你所假设的知识。

1.  任何额外的安装说明和他们设置所需的信息。

+   一个代码编辑器

+   一个现代的网络浏览器

+   NodeJS

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[www.packt.com/support](http://www.packt.com/support)注册，将文件直接发送到您的邮箱。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packt.com](http://www.packt.com)。

1.  选择“支持”选项卡。

1.  单击“代码下载和勘误”。

1.  在搜索框中输入书名，然后按照屏幕上的说明操作。

下载文件后，请确保使用以下最新版本的软件解压缩文件夹：

+   Windows 系统使用 WinRAR/7-Zip

+   Mac 系统使用 Zipeg/iZip/UnRarX

+   Linux 系统使用 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/React-and-React-Native-Second-Edition`](https://github.com/PacktPublishing/React-and-React-Native-Second-Edition)。如果代码有更新，将在现有的 GitHub 存储库中更新。

我们还有其他代码包，可以从我们丰富的图书和视频目录中获得，网址为**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**。请查看！

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。例如：“将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。”

代码块设置如下：

```jsx
import React, { Component } from 'react';
// Renders a "<button>" element, using
// "this.props.children" as the text.
export default class MyButton extends Component {
  render() {
    return <button>{this.props.children}</button>;
  }
}
```

任何命令行输入或输出都以以下方式编写：

```jsx
$ npm install -g create-react-native-app $ create-react-native-app my-project 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会在文本中以这种方式出现。例如：“从管理面板中选择系统信息。”

警告或重要说明会以这种方式出现。提示和技巧会以这种方式出现。
