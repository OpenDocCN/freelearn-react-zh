# 前言

React 是一个开源的、适应性强的 JavaScript 库，用于从称为组件的小型、独立的部分构建复杂的用户界面。本书将帮助您有效地使用 React，使您的应用程序更加灵活、易于维护，并提高其性能，同时通过提高速度而不影响质量来提高工作流程的效率。

您将首先了解 React 的内部工作原理，然后逐渐转向编写可维护和清晰的代码。接下来的章节将向您展示如何构建可在整个应用程序中重复使用的组件，如何组织应用程序以及如何创建真正有效的表单。之后，您将通过探索如何为 React 组件添加样式并优化它们，使应用程序更快、更具响应性。最后，您将学习如何有效地编写测试，并学习如何为 React 及其生态系统做出贡献。

阅读本书结束时，您将能够避免试错和开发头疼的过程，而是拥有有效构建和部署真实 React web 应用程序所需的技能。

# 本书适合对象

本书适用于希望增进对 React 的理解并将其应用于实际应用程序开发的 Web 开发人员。假定具有中级水平的 React 和 JavaScript 经验。

# 本书内容包括

*第一章*，*开始使用 React*，涵盖了一些对于后续内容至关重要且对于日常使用 React 至关重要的基本概念。我们将学习如何编写声明性代码，并清楚地了解我们创建的组件与 React 用于在屏幕上显示实例的元素之间的区别。然后，我们将了解将逻辑和模板放在一起的选择背后的原因，以及为什么这个不受欢迎的决定对 React 来说是一个巨大的胜利。我们将了解在 JavaScript 生态系统中感到疲劳是常见的原因，但我们也将看到如何通过迭代方法来避免这些问题。最后，我们将了解新的`create-react-app` CLI 是什么，有了它，我们就准备好开始编写一些真正的代码了。

第二章《清理您的代码》教会您大量关于 JSX 的工作原理以及如何在我们的组件中正确使用它。我们从语法的基础开始，建立坚实的知识基础，使我们能够掌握 JSX 及其特性。我们将看看 ESLint 及其插件如何帮助我们更快地发现问题，并强制执行代码库中的一致风格指南。最后，我们将学习函数式编程的基础知识，以理解在编写 React 应用程序时使用的重要概念。现在我们的代码已经整洁，我们准备深入研究 React，并学习如何编写真正可重用的组件。

第三章《React Hooks》教会您如何使用新的 React Hooks 以及如何构建自己的 Hooks。

第四章《探索流行的组合模式》解释了如何组合我们的可重用组件并使它们有效地进行通信。然后，我们将介绍 React 中一些最有趣的组合模式。我们还将看到 React 如何尝试通过混合解决组件之间共享功能的问题。然后，我们将学习如何处理上下文，而无需将我们的组件与其耦合在一起，这要归功于 HOCs。最后，我们将看到如何通过遵循“FunctionAsChild”模式来动态组合组件。

第五章《使用真实项目理解 GraphQL》解释了如何在一个真实项目中使用 GraphQL 查询和变异，您将学习如何使用 GraphQL、JWT 令牌和 Node.js 构建身份验证系统。

第六章《数据管理》介绍了一些常见的模式，以使子组件和父组件使用回调进行通信。然后，我们将学习如何使用一个共同的父组件来在不直接连接的组件之间共享数据。我们将从一个简单的组件开始，它将能够从 GitHub 加载数据，然后我们将使用 HOCs 使其可重用，然后继续学习如何使用`react-refetch`将数据获取模式应用到我们的组件中，避免重复造轮子。最后，我们将学习如何使用新的 Context API。

第七章，“为浏览器编写代码”，探讨了当我们使用 React 针对浏览器时可以做的不同事情，从表单创建到事件；从动画到 SVG。React 为我们提供了一种声明性的方式来管理我们在创建 Web 应用程序时需要处理的所有方面。React 以一种我们可以执行命令式操作的方式让我们访问实际的 DOM 节点，这在我们需要将 React 与现有的命令式库集成时非常有用。

第八章，“让您的组件看起来漂亮”，研究了为什么常规 CSS 可能不是样式化组件的最佳方法，以及各种替代解决方案。在本章中，我们将学习在 React 中使用内联样式，以及这种方法的缺点，可以通过使用 Radium 库来解决。最后，将介绍一个新的库`styled-components`，以及它提供的现代方法的概要。

第九章，“为了乐趣和利润进行服务器端渲染”，邀请您按照一定的步骤设置服务器端渲染的应用程序。到本章末，我们将能够构建一个通用应用程序，并了解其利弊。

第十章，“改善您的应用程序的性能”，快速查看了 React 性能的基本组件，以及我们如何使用一些 API 来帮助库找到更新 DOM 的最佳路径，而不会降低用户体验。我们还将学习如何使用一些工具来监视性能并找到瓶颈，这些工具可以导入到我们的代码库中。最后，我们将看到不可变性和*PureComponent*是构建快速 React 应用程序的完美工具。

第十一章，“测试和调试”，解释了为什么测试我们的应用程序很重要，以及我们可以使用哪些最流行的工具来使用 React 创建测试的概要。我们还将学习建立一个 Jest 环境，使用 Enzyme 测试组件，以及讨论 Enzyme 是什么以及为什么它对于测试 React 应用程序是必不可少的。通过涵盖所有这些主题，到本章末，我们将能够从头开始创建一个测试环境，并为我们应用程序的组件编写测试。

*第十二章*，*React Router*，讨论了一些步骤，将帮助我们在应用程序中实现 React Router。随着我们完成每个部分，我们将添加动态路由，并了解 React Router 的工作原理。我们将学习如何安装和配置 React Router，以及向路由添加组件、exact 属性和参数。

*第十三章*，*应避免的反模式*，讨论了在使用 React 时应避免的常见反模式。我们将研究为什么改变状态对性能有害。选择正确的键和帮助调和器也将在本章中讨论，以及为什么在 DOM 元素上扩展 props 是不好的，以及我们如何避免这样做。

*第十四章*，*部署到生产环境*，涵盖了如何在 Google Cloud 上的 Ubuntu 服务器上使用 Node.js 和 nginx 部署我们的 React 应用程序，以及配置 nginx、PM2 和域。还将介绍如何实施 CircleCI 进行持续集成。

*第十五章*，*下一步*，演示了我们如何通过提出问题和拉取请求来为 React 库做出贡献，并解释了为什么重要的是回馈社区并分享我们的代码。最后，我们将介绍在推送开源代码时需要牢记的最重要的方面，以及如何发布一个`npm`包以及如何使用语义版本控制。

# 为了充分利用本书

要精通 React，您需要对 JavaScript 和 Node.js 有基本的了解。本书主要针对 Web 开发人员，在撰写时，对读者做出了以下假设：

+   读者知道如何安装最新版本的 Node.js。

+   读者是一名中级开发人员，能够理解 JavaScript ES6 语法。

+   读者对 CLI 工具和 Node.js 语法有一定的经验。

## 下载示例代码文件

您可以从 GitHub 上的[`github.com/PacktPublishing/React-17-Design-Patterns-and-Best-Practices-Third-Edition`](https://github.com/PacktPublishing/React-17-Design-Patterns-and-Best-Practices-Third-Edition)下载本书的示例代码文件。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自丰富书籍和视频目录的其他代码捆绑包可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上找到。去看看吧！

## 下载彩色图片

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`static.packt-cdn.com/downloads/9781800560444_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781800560444_ColorImages.pdf)。

## 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。以下是一个例子：“将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。”

代码块设置如下：

```jsx
html, body, #map {
 height: 100%; 
 margin: 0;
 padding: 0
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```jsx
const name = `Carlos`
const multilineHtml = `<p>
  This is a multiline string
 </p>`
console.log(`Hi, my name is ${name}`)
```

任何命令行输入或输出都以以下方式编写：

```jsx
npm install -g @babel/preset-env @babel/preset-react 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。以下是一个例子：“从管理面板中选择系统信息。”

警告或重要说明会以这种方式出现。提示和技巧会以这种方式出现。
